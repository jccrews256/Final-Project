<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Cass Crews">

<title>A Predictive Model for Diabetes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-d4be639c637f3db3c684c66cefad7e0c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A Predictive Model for Diabetes</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Cass Crews </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Diabetes is a challenging disease for those who suffer from it, and it is also difficult to diagnose. However, predictive machine learning models may be able to effectively predict when someone has diabetes or is at least at greater risk. The goal of this project is to use easily collected characteristics on individuals to tune a predictive model of diabetes incidence.</p>
<p>To develop this model, we will utilize the 2015 survey responses from the Behavioral Risk Factor Surveillance System (BRFSS), an annual telephone-based survey attempting to characterize the state of American health. While over 400,000 individuals were surveyed via telephone, we analyze a cleaned version of the dataset that contains 253,680 responses. This dataset is made available by Alex Teboul via <a href="https://www.kaggle.com/datasets/alexteboul/diabetes-health-indicators-dataset?select=diabetes_binary_health_indicators_BRFSS2015.csv">Kaggle</a>.</p>
<p>Our analysis will focus on the following variables, with cleaned and original variable names indicated: - <code>diabetes_binary</code>: Our response variable, a binary indicator for diabetes (original name: <code>Diabetes_binary</code>) - <code>high_bp</code>: A binary indicator for high blood pressure (original name: <code>HighBP</code>) - <code>high_chol</code>: A binary indicator for high cholesterol (original name: <code>HighChol</code>) - <code>phys_activity</code>: A binary indicator for whether the individual has exercised outside of work in the past 30 days (original name: <code>PhysActivity</code>) - <code>fruits</code>: A binary indicator for whether the individual consumes fruit at least once per day (original name: <code>Fruits</code>) - <code>veggies</code>: A binary indicator for whether the individual consumes vegetables at least once per day (original name: <code>Veggies</code>) - <code>smoker</code>: A binary indicator for whether the individual has smoked at least 100 cigarettes in their lifetime (original name: <code>Smoker</code>) - <code>hvy_alc_consump</code>: A binary indicator for whether the individual is considered a heavy drinker – 14 or more drinks per week for men and seven or more drinks per week for women (original name: <code>HvyAlcoholConsump</code>) - <code>sex</code>: A binary sex indicator – 0 for female and 1 for male (original name: <code>Sex</code>) - <code>age</code>: An age group indicator with 13 levels ranging from 18-24 to 80+ (original name: <code>Age</code>) - <code>income</code>: A household income income bracket indicator with 8 levels ranging from below $10,000 per year to over $75,000 per year (original name: <code>Income</code>)</p>
<p>This page documents our efforts to tune two model classes in producing a final predictive model of diabetes incidence. Those two model classes are the classification tree and the random forest, which will each be described in detail below. To tune the models and select a final model, we take the following approach: 1. Split the data into a training set containing 70% of the data and a test set containing 30% of the data. 2. Tune each model class using the training set via 5-fold cross-validation, using log loss to select the best model from each class. 3. Fit each “best” model to the full training set and predict for the full test set, selecting the final model with the best log loss. 4. Fit the overall best model to the full dataset so that it can be put into production.</p>
</section>
<section id="loading-packages-and-processing-the-data" class="level1">
<h1>Loading Packages and Processing the Data</h1>
<p>Before we begin modeling, let’s load in the necessary packages and also read in and process the data. Given the size of the dataset, let’s utilize five cores to speed up processing time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Reading in packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forcats' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   4.0.0     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.4     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.3.0 ──
✔ broom        1.0.10     ✔ rsample      1.3.1 
✔ dials        1.4.2      ✔ tune         2.0.1 
✔ infer        1.0.9      ✔ workflows    1.3.0 
✔ modeldata    1.5.1      ✔ workflowsets 1.1.1 
✔ parsnip      1.3.3      ✔ yardstick    1.3.2 
✔ recipes      1.3.1      </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'yardstick' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ scales::discard() masks purrr::discard()
✖ dplyr::filter()   masks stats::filter()
✖ recipes::fixed()  masks stringr::fixed()
✖ dplyr::lag()      masks stats::lag()
✖ yardstick::spec() masks readr::spec()
✖ recipes::step()   masks stats::step()</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsample)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ranger)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ranger' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'vip' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'vip'

The following object is masked from 'package:utils':

    vi</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(future)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'future' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Utilizing parallel processing with 5 cores</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The code below reads in the data and applies the same processing steps used on the <a href="https://jccrews256.github.io/Final-Project/EDA.html">exploratory data analysis page</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Reading in data and subsetting to variables of interest</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>raw_data<span class="ot">&lt;-</span><span class="fu">read_csv</span>(<span class="st">"diabetes_binary_health_indicators_BRFSS2015.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Diabetes_binary, HighBP, HighChol, PhysActivity, Fruits, Veggies, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>         Smoker, HvyAlcoholConsump, Sex, Age, BMI, Income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 253680 Columns: 22
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
dbl (22): Diabetes_binary, HighBP, HighChol, CholCheck, BMI, Smoker, Stroke,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Converting factor variables to true factors with appropriate labels, renaming with clean names</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>data<span class="ot">&lt;-</span>raw_data <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Converting yes-no variables to factors</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diabetes_binary =</span> <span class="fu">factor</span>(Diabetes_binary, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_bp =</span> <span class="fu">factor</span>(HighBP, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_chol =</span> <span class="fu">factor</span>(HighChol, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">phys_activity =</span> <span class="fu">factor</span>(PhysActivity, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fruits =</span> <span class="fu">factor</span>(Fruits, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">veggies =</span> <span class="fu">factor</span>(Veggies, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">smoker =</span> <span class="fu">factor</span>(Smoker, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hvy_alc_consump =</span> <span class="fu">factor</span>(HvyAlcoholConsump, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Converting sex to factor</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">factor</span>(Sex, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Converting age to factor</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">factor</span>(Age, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"18 to 24"</span>, <span class="st">"25 to 29"</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"30 to 34"</span>, <span class="st">"35 to 39"</span>,</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"40 to 44"</span>, <span class="st">"45 to 49"</span>,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"50 to 54"</span>, <span class="st">"55 to 59"</span>,</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"60 to 64"</span>, <span class="st">"65 to 69"</span>,</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"70 to 74"</span>, <span class="st">"75 to 79"</span>,</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"80+"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Converting income to factor</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income =</span> <span class="fu">factor</span>(Income, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Less than $10k"</span>, <span class="st">"$10k to $15k"</span>,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"$15k to $20k"</span>, <span class="st">"$20k to $25k"</span>,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"$25k to $35k"</span>, <span class="st">"$35k to $50k"</span>,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>                                                     <span class="st">"$50k to $75k"</span>, <span class="st">"$75k+"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Renaming bmi</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">bmi =</span> BMI) <span class="sc">|&gt;</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Dropping original "factors" </span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(Diabetes_binary<span class="sc">:</span>Age, Income))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preparing-the-data-for-model-tuning" class="level1">
<h1>Preparing the Data for Model Tuning</h1>
<p>Before we begin fitting models, we need to split the data into training and test set and also create our five cross-validation folds. Let’s start by splitting the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting seed for reproducibility</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Splitting the data into training and test sets </span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>split<span class="ot">&lt;-</span><span class="fu">initial_split</span>(data, <span class="at">prop =</span> <span class="fl">0.7</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Printing the structure of the split object</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>split</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Training/Testing/Total&gt;
&lt;177576/76104/253680&gt;</code></pre>
</div>
</div>
<p>By printing the split object, we can see that we have split the data into 70% and 30% chunks.</p>
<p>Now we will create the five folds for tuning.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting seed for reproducibility </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">5</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Extracting training and test sets</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>train<span class="ot">&lt;-</span><span class="fu">training</span>(split)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>test<span class="ot">&lt;-</span><span class="fu">testing</span>(split)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Separating the training data into the 5 folds</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>folds<span class="ot">&lt;-</span><span class="fu">vfold_cv</span>(train, <span class="at">v =</span> <span class="dv">5</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Printing the structure of the folds object</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>folds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#  5-fold cross-validation 
# A tibble: 5 × 2
  splits                 id   
  &lt;list&gt;                 &lt;chr&gt;
1 &lt;split [142060/35516]&gt; Fold1
2 &lt;split [142061/35515]&gt; Fold2
3 &lt;split [142061/35515]&gt; Fold3
4 &lt;split [142061/35515]&gt; Fold4
5 &lt;split [142061/35515]&gt; Fold5</code></pre>
</div>
</div>
<p>Printing the folds object reflects the division of our training set into five roughly equal parts.</p>
</section>
<section id="tuning-the-classification-tree" class="level1">
<h1>Tuning the Classification Tree</h1>
<p>In many ways, the classification tree model is the most conceptually simple model. We build a single tree that functions as a decision rule for predictions. Each split in the tree is successively chosen such that it maximally reduces “impurity” of response classes in the resultant branches. That is, we choose splits such that the observations at the end of each branch are maximally homogeneous. Once we have fit a tree, we make predictions via majority rule within each endpoint.</p>
<p>To tune a classification tree, we generally adjust two hyperparameters: 1. Tree depth, or the maximum number of splits leading to a single branch; a lower value will grow a “wider” tree 2. Cost complexity, which is a hyperparameter that controls the degree of pruning (removal of splits) to prevent overfitting; higher values correspond to more pruning</p>
<p>Before we tune our classification tree, let’s specify the recipe we will use. This is a simple recipe, as most tree-based models do not require us to convert factors to dummies or specific non-linear effects; they naturally handle such complexities. By prepping the recipe and printing a summary, we can confirm that we has assigned the correct roles to each variable. Note that this is the same recipe we will use for the random forest model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Constructing tidymodels recipe</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>recipe<span class="ot">&lt;-</span><span class="fu">recipe</span>(diabetes_binary <span class="sc">~</span> ., <span class="at">data =</span> train)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Printing recipe variable list with roles</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>recipe <span class="sc">|&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">prep</span>(<span class="at">training =</span> train) <span class="sc">|&gt;</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>() <span class="sc">|&gt;</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   variable        type      role      source  
   &lt;chr&gt;           &lt;list&gt;    &lt;chr&gt;     &lt;chr&gt;   
 1 bmi             &lt;chr [2]&gt; predictor original
 2 high_bp         &lt;chr [3]&gt; predictor original
 3 high_chol       &lt;chr [3]&gt; predictor original
 4 phys_activity   &lt;chr [3]&gt; predictor original
 5 fruits          &lt;chr [3]&gt; predictor original
 6 veggies         &lt;chr [3]&gt; predictor original
 7 smoker          &lt;chr [3]&gt; predictor original
 8 hvy_alc_consump &lt;chr [3]&gt; predictor original
 9 sex             &lt;chr [3]&gt; predictor original
10 age             &lt;chr [3]&gt; predictor original
11 income          &lt;chr [3]&gt; predictor original
12 diabetes_binary &lt;chr [3]&gt; outcome   original</code></pre>
</div>
</div>
<p>Everything looks good, so we can now create a workflow for our tuning process. We will indicate that we want to tune the tree depth and cost complexity while not allowing any tree endpoint to contain fewer than 20 observations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Specifying model and engine for classification tree</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>tree_model<span class="ot">&lt;-</span><span class="fu">decision_tree</span>(<span class="at">tree_depth =</span> <span class="fu">tune</span>(),</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">min_n =</span> <span class="dv">20</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">cost_complexity =</span> <span class="fu">tune</span>()) <span class="sc">|&gt;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">|&gt;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating classification tree workflow</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>tree_wkf<span class="ot">&lt;-</span><span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe) <span class="sc">|&gt;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(tree_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We are now ready to tune. To keep computation costs relatively low, we will fit models for a grid of 10 tree depths and 10 cost complexity values (100 total models). Remember that we are refitting each individual model five times (5-fold CV), so we are actually fitting 500 total models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fitting classification tree model across grid of depth and complexity values</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>tree_fit<span class="ot">&lt;-</span>tree_wkf <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples =</span> folds,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">grid =</span> <span class="fu">grid_regular</span>(<span class="fu">tree_depth</span>(), <span class="fu">cost_complexity</span>(), <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">10</span>)),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">metrics =</span> <span class="fu">metric_set</span>(mn_log_loss, accuracy)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have fit the models, we can print the average log loss values across the five folds to identify the best combination of tree depth and cost complexity. While we will selected the best model by minimizing the log loss value, we will also print average accuracy values so that we can obtain a better conceptual understanding of predictive capacity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sorting models by log loss</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>tree_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"mn_log_loss"</span>) <span class="sc">|&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean) <span class="sc">|&gt;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")

Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 13%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 3%">
<col style="width: 10%">
<col style="width: 19%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">cost_complexity</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3440640</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0022177</td>
<td style="text-align: left;">pre0_mod007_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3440640</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0022177</td>
<td style="text-align: left;">pre0_mod017_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3440640</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0022177</td>
<td style="text-align: left;">pre0_mod027_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3440640</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0022177</td>
<td style="text-align: left;">pre0_mod037_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3440640</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0022177</td>
<td style="text-align: left;">pre0_mod047_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3449960</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0025892</td>
<td style="text-align: left;">pre0_mod057_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3455059</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0020631</td>
<td style="text-align: left;">pre0_mod008_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3455059</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0020631</td>
<td style="text-align: left;">pre0_mod018_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3455059</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0020631</td>
<td style="text-align: left;">pre0_mod028_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3455059</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0020631</td>
<td style="text-align: left;">pre0_mod038_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3455059</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0020631</td>
<td style="text-align: left;">pre0_mod048_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3468333</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0027492</td>
<td style="text-align: left;">pre0_mod058_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3499877</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0018421</td>
<td style="text-align: left;">pre0_mod009_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3499877</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0018421</td>
<td style="text-align: left;">pre0_mod019_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3499877</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0018421</td>
<td style="text-align: left;">pre0_mod029_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3499877</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0018421</td>
<td style="text-align: left;">pre0_mod039_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3499877</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0018421</td>
<td style="text-align: left;">pre0_mod049_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3500823</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016814</td>
<td style="text-align: left;">pre0_mod006_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3500823</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016814</td>
<td style="text-align: left;">pre0_mod016_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3500823</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016814</td>
<td style="text-align: left;">pre0_mod026_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3500823</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016814</td>
<td style="text-align: left;">pre0_mod036_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3500823</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016814</td>
<td style="text-align: left;">pre0_mod046_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3500823</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016814</td>
<td style="text-align: left;">pre0_mod056_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3512939</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0022718</td>
<td style="text-align: left;">pre0_mod059_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3529256</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010952</td>
<td style="text-align: left;">pre0_mod005_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3529256</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010952</td>
<td style="text-align: left;">pre0_mod015_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3529256</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010952</td>
<td style="text-align: left;">pre0_mod025_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3529256</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010952</td>
<td style="text-align: left;">pre0_mod035_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3529256</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010952</td>
<td style="text-align: left;">pre0_mod045_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3529256</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010952</td>
<td style="text-align: left;">pre0_mod055_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3533248</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005343</td>
<td style="text-align: left;">pre0_mod066_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3538047</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0004467</td>
<td style="text-align: left;">pre0_mod065_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3539422</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005017</td>
<td style="text-align: left;">pre0_mod067_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3540918</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0011098</td>
<td style="text-align: left;">pre0_mod069_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3546547</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0009121</td>
<td style="text-align: left;">pre0_mod068_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3549963</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0011518</td>
<td style="text-align: left;">pre0_mod070_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3573408</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012439</td>
<td style="text-align: left;">pre0_mod076_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3573535</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012496</td>
<td style="text-align: left;">pre0_mod077_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3573535</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012496</td>
<td style="text-align: left;">pre0_mod078_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3573535</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012496</td>
<td style="text-align: left;">pre0_mod079_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3573535</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012496</td>
<td style="text-align: left;">pre0_mod080_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3573899</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012654</td>
<td style="text-align: left;">pre0_mod075_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod004_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod014_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod024_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod034_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod044_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod054_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod064_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3575100</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012512</td>
<td style="text-align: left;">pre0_mod074_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3610254</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0017936</td>
<td style="text-align: left;">pre0_mod010_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3610254</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0017936</td>
<td style="text-align: left;">pre0_mod020_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3610254</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0017936</td>
<td style="text-align: left;">pre0_mod030_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3610254</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0017936</td>
<td style="text-align: left;">pre0_mod040_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3610254</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0017936</td>
<td style="text-align: left;">pre0_mod050_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3613752</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0018487</td>
<td style="text-align: left;">pre0_mod060_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod003_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod013_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod023_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod033_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod043_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod053_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3757583</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0110723</td>
<td style="text-align: left;">pre0_mod063_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod001_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod002_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod011_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod012_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod021_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod022_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod031_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod032_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod041_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod042_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod051_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod052_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod061_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod062_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod071_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod072_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod073_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod081_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod082_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod083_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod084_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod085_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod086_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod087_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod088_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod089_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod090_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod091_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod092_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod093_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod094_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod095_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod096_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod097_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod098_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod099_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.4036799</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010036</td>
<td style="text-align: left;">pre0_mod100_post0</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sorting models by accuracy</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>tree_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"accuracy"</span>) <span class="sc">|&gt;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean)) <span class="sc">|&gt;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")

Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 18%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 3%">
<col style="width: 11%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">cost_complexity</th>
<th style="text-align: right;">tree_depth</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8629319</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008648</td>
<td style="text-align: left;">pre0_mod076_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8628756</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008983</td>
<td style="text-align: left;">pre0_mod077_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8628756</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008983</td>
<td style="text-align: left;">pre0_mod078_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8628756</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008983</td>
<td style="text-align: left;">pre0_mod079_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8628756</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008983</td>
<td style="text-align: left;">pre0_mod080_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8627574</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007890</td>
<td style="text-align: left;">pre0_mod075_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8627405</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008214</td>
<td style="text-align: left;">pre0_mod066_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626785</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008105</td>
<td style="text-align: left;">pre0_mod005_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626785</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008105</td>
<td style="text-align: left;">pre0_mod015_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626785</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008105</td>
<td style="text-align: left;">pre0_mod025_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626785</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008105</td>
<td style="text-align: left;">pre0_mod035_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626785</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008105</td>
<td style="text-align: left;">pre0_mod045_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626785</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008105</td>
<td style="text-align: left;">pre0_mod055_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626504</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008038</td>
<td style="text-align: left;">pre0_mod065_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626166</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007280</td>
<td style="text-align: left;">pre0_mod006_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626166</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007280</td>
<td style="text-align: left;">pre0_mod016_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626166</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007280</td>
<td style="text-align: left;">pre0_mod026_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626166</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007280</td>
<td style="text-align: left;">pre0_mod036_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626166</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007280</td>
<td style="text-align: left;">pre0_mod046_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8626166</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007280</td>
<td style="text-align: left;">pre0_mod056_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8624871</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008741</td>
<td style="text-align: left;">pre0_mod067_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8624476</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007048</td>
<td style="text-align: left;">pre0_mod068_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod004_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod014_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod024_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod034_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod044_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod054_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod064_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8622505</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006767</td>
<td style="text-align: left;">pre0_mod074_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8619633</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005496</td>
<td style="text-align: left;">pre0_mod070_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8618958</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006123</td>
<td style="text-align: left;">pre0_mod069_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8610454</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007958</td>
<td style="text-align: left;">pre0_mod057_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8610116</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007847</td>
<td style="text-align: left;">pre0_mod007_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8610116</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007847</td>
<td style="text-align: left;">pre0_mod017_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8610116</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007847</td>
<td style="text-align: left;">pre0_mod027_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8610116</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007847</td>
<td style="text-align: left;">pre0_mod037_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8610116</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007847</td>
<td style="text-align: left;">pre0_mod047_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod001_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod002_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod011_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod012_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod021_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod022_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod031_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod032_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod041_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod042_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod051_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod052_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod061_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod062_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod071_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod072_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-03</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod073_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod081_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod082_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod083_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod084_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod085_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod086_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod087_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod088_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod089_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-02</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod090_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod091_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod092_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod093_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod094_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod095_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod096_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod097_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod098_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod099_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-01</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod100_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod003_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod013_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod023_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod033_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod043_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod053_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-04</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8604766</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006107</td>
<td style="text-align: left;">pre0_mod063_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8593278</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007112</td>
<td style="text-align: left;">pre0_mod058_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8592265</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007218</td>
<td style="text-align: left;">pre0_mod008_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8592265</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007218</td>
<td style="text-align: left;">pre0_mod018_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8592265</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007218</td>
<td style="text-align: left;">pre0_mod028_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8592265</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007218</td>
<td style="text-align: left;">pre0_mod038_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8592265</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007218</td>
<td style="text-align: left;">pre0_mod048_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8558026</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007028</td>
<td style="text-align: left;">pre0_mod059_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8554534</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006894</td>
<td style="text-align: left;">pre0_mod009_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8554534</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006894</td>
<td style="text-align: left;">pre0_mod019_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8554534</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006894</td>
<td style="text-align: left;">pre0_mod029_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8554534</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006894</td>
<td style="text-align: left;">pre0_mod039_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">13</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8554534</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006894</td>
<td style="text-align: left;">pre0_mod049_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-05</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8526321</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008015</td>
<td style="text-align: left;">pre0_mod060_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8521084</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007941</td>
<td style="text-align: left;">pre0_mod010_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8521084</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007941</td>
<td style="text-align: left;">pre0_mod020_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0e+00</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8521084</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007941</td>
<td style="text-align: left;">pre0_mod030_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1e-07</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8521084</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007941</td>
<td style="text-align: left;">pre0_mod040_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1e-06</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8521084</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007941</td>
<td style="text-align: left;">pre0_mod050_post0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>It seems we have five models that achieve the minimum cross-validated log loss. These models all have a tree depth of 10, but with different cost complexity values. When we look at accuracy, we see that our best models barely perform above the no-information rate of 0.861. That is, we only slightly outperform the strategy of predicting that no one has diabetes. This does not bode well for our ability to effectively predict diabetes incidence.</p>
<p>Let’s now extract our best model based on log loss. In particular, let’s select the simplest model (largest cost complexity) among the five top-performing models.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Capturing best tree model (least complex "best" model)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>tree_best_params<span class="ot">&lt;-</span><span class="fu">show_best</span>(tree_fit, <span class="at">metric =</span> <span class="st">"mn_log_loss"</span>, <span class="at">n =</span> <span class="cn">Inf</span>) <span class="sc">|&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mean<span class="sc">==</span><span class="fu">min</span>(mean)) <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(cost_complexity) <span class="sc">|&gt;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cost_complexity, tree_depth)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Printing hyperparameter value</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>tree_best_params</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  cost_complexity tree_depth
            &lt;dbl&gt;      &lt;int&gt;
1        0.000001         10</code></pre>
</div>
</div>
<p>Now that we have identified our best classification tree model, let’s tune the random forest.</p>
</section>
<section id="tuning-the-random-forest" class="level1">
<h1>Tuning the Random Forest</h1>
<p>Random forests are explicitly designed to overcome a key drawback of a single tree, such as we have in the classification tree model. This limitation is that single trees are highly sensitive to changes in their training data, making their fits highly volatile. Random forests solve this issue by truly creating a random forest with hundreds of trees. We then combine predictions across the trees to generate a single, more stable prediction.</p>
<p>To create these hundreds of random trees, the model repeated draws non-parametric bootstrap samples from the training data that are the same size as the original dataset and fits a tree to each sample. This naturally creates variability across trees. If you are familiar with the bagged tree model, you are likely thinking this sounds just like that model. You are correct that we create a forest via a bootstrap sampling mechanism for each model. However, there is one clear distinction between the two models. At each split, random forests take a random sample of the predictors before selecting the predictor to split by; the bagged tree model can be thought of as a special case of the random forest where the number of predictors we “randomly select” for each split is equal to the total number of predictors. This ensures we are not allowing a few dominant predictors determine the most important splits for every tree. This is very important because creating more distinct trees will reduce the variability of our predictions in comparison to an ensemble model with highly “correlated” sub-models.</p>
<p>To tune the random forest model, we will try different values of <code>mtry</code>, or the number of predictors randomly selected for each split. We will set the minimum number of observation in any endpoint to 20, and we will also set the total number of trees in each random forest to 500. This creates relatively small random forests but ones that are more computationally manageable.</p>
<p>Now that we understand the random forest and how we will tune it, let’s specify our workflow. Note that we have now changed our engine to the popular <code>ranger</code> engine and have indicated we want to tune <code>mtry</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Specifying model and engine for random forest</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>rf_model<span class="ot">&lt;-</span><span class="fu">rand_forest</span>(<span class="at">mtry =</span> <span class="fu">tune</span>(),</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">min_n =</span> <span class="dv">20</span>,</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">trees =</span> <span class="dv">500</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">importance =</span> <span class="st">"impurity"</span>, <span class="at">seed =</span> <span class="dv">25</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating random forest workflow</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>rf_wkf<span class="ot">&lt;-</span><span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe) <span class="sc">|&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(rf_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have our workflow, we are ready to fit our models. We are trying all possible values of <code>mtry</code> given that we have 11 predictors (1 to 11). This results in 55 total models fit given that we are utilizing 5-fold CV.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fitting random forest model across values of mtry</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>rf_fit<span class="ot">&lt;-</span>rf_wkf <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tune_grid</span>(<span class="at">resamples =</span> folds,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">grid =</span> <span class="fu">grid_regular</span>(<span class="fu">mtry</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">11</span>)), <span class="at">levels =</span> <span class="dv">11</span>),</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">metrics =</span> <span class="fu">metric_set</span>(mn_log_loss, accuracy)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have fit these 55 models, we will extract average log-loss for each value of <code>mtry</code>. As we did for the classification tree model, we will also extract average accuracy values for a prediction metric that is easier to interpret.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sorting models by log loss</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"mn_log_loss"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean) <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")

Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 7%">
<col style="width: 17%">
<col style="width: 16%">
<col style="width: 14%">
<col style="width: 4%">
<col style="width: 14%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">mtry</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3295532</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0009553</td>
<td style="text-align: left;">pre0_mod03_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3307841</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010052</td>
<td style="text-align: left;">pre0_mod02_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3339265</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0010409</td>
<td style="text-align: left;">pre0_mod04_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3392282</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0011195</td>
<td style="text-align: left;">pre0_mod05_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3435348</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0012359</td>
<td style="text-align: left;">pre0_mod06_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3491324</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0015523</td>
<td style="text-align: left;">pre0_mod07_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3514497</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0008205</td>
<td style="text-align: left;">pre0_mod01_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3544302</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0016641</td>
<td style="text-align: left;">pre0_mod08_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3606347</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0023199</td>
<td style="text-align: left;">pre0_mod09_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3706848</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0023809</td>
<td style="text-align: left;">pre0_mod10_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: left;">mn_log_loss</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.3868094</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0042066</td>
<td style="text-align: left;">pre0_mod11_post0</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sorting models by accuracy</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span> <span class="fu">filter</span>(.metric<span class="sc">==</span><span class="st">"accuracy"</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean)) <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")

Warning: 'xfun::attr()' is deprecated.
Use 'xfun::attr2()' instead.
See help("Deprecated")</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 7%">
<col style="width: 13%">
<col style="width: 16%">
<col style="width: 15%">
<col style="width: 4%">
<col style="width: 15%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">mtry</th>
<th style="text-align: left;">.metric</th>
<th style="text-align: left;">.estimator</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">std_err</th>
<th style="text-align: left;">.config</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8635063</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006229</td>
<td style="text-align: left;">pre0_mod03_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8628306</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006057</td>
<td style="text-align: left;">pre0_mod04_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8621379</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005701</td>
<td style="text-align: left;">pre0_mod02_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8619971</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006249</td>
<td style="text-align: left;">pre0_mod05_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8614903</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005056</td>
<td style="text-align: left;">pre0_mod06_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8608202</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007122</td>
<td style="text-align: left;">pre0_mod07_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8607075</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005507</td>
<td style="text-align: left;">pre0_mod01_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8602401</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0006701</td>
<td style="text-align: left;">pre0_mod08_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8598234</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0007144</td>
<td style="text-align: left;">pre0_mod09_post0</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8596207</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0005799</td>
<td style="text-align: left;">pre0_mod10_post0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: left;">accuracy</td>
<td style="text-align: left;">binary</td>
<td style="text-align: right;">0.8591195</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.0004818</td>
<td style="text-align: left;">pre0_mod11_post0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>In this case, the same model had the best cross-validated log loss and accuracy: the model that randomly selects three predictors to use at each split.</p>
<p>Focusing on the accuracy values, we again see that our accuracy is barely above the no-information rate. It seems we have not found great predictors of diabetes incidence!</p>
<p>As a final step in the random forest tuning process, let’s extract the best <code>mtry</code> value (3) so that we can fit a random forest to the entire training set using that value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Capturing best random forest model</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>rf_best_params<span class="ot">&lt;-</span><span class="fu">select_best</span>(rf_fit, <span class="at">metric =</span> <span class="st">"mn_log_loss"</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Printing hyperparameter values</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>rf_best_params</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
   mtry .config         
  &lt;int&gt; &lt;chr&gt;           
1     3 pre0_mod03_post0</code></pre>
</div>
</div>
<p>Now that we have captured the best-performing <code>mtry</code> value, we are ready to compare our best classification tree and random forest models.</p>
<p>#Comparing Performance on Test Set</p>
<p>Let’s now fit our best classification tree and random forest models to the entire training set and see how well they predict on our full test set. We will start with the classification tree. Note that the <code>last_fit()</code> function both fits the workflow-specified model to the full training set and tests on the test set all in one line of code. Truly tidy!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting classification tree hyperparameter values to those selected via CV</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>tree_final_wkf<span class="ot">&lt;-</span>tree_wkf <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(tree_best_params)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Fitting final model to the full training set and testing on original test set</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>tree_final_fit<span class="ot">&lt;-</span>tree_final_wkf <span class="sc">|&gt;</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(split, <span class="at">metrics =</span> <span class="fu">metric_set</span>(mn_log_loss, accuracy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have fit and tested the best classification tree, we will complete the same process for the best random forest model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Setting rf hyperparameter values to those selected via CV</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>rf_final_wkf<span class="ot">&lt;-</span>rf_wkf <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(rf_best_params)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Fitting final model to the full training set and testing on original test set</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>rf_final_fit<span class="ot">&lt;-</span>rf_final_wkf <span class="sc">|&gt;</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">last_fit</span>(split, <span class="at">metrics =</span> <span class="fu">metric_set</span>(mn_log_loss, accuracy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We have now fit both models to the training set and predicted on the test set. Let’s extract the test metrics to see how the models performed and select a final model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Printing log loss and accuracy for the best models of each class</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>( tree_final_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">"Class Tree"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(model, <span class="fu">everything</span>()),</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>      rf_final_fit <span class="sc">|&gt;</span> <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">model =</span> <span class="st">"Random Forest"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(model, <span class="fu">everything</span>()))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  model         .metric     .estimator .estimate .config        
  &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;          
1 Class Tree    accuracy    binary         0.860 pre0_mod0_post0
2 Class Tree    mn_log_loss binary         0.343 pre0_mod0_post0
3 Random Forest accuracy    binary         0.863 pre0_mod0_post0
4 Random Forest mn_log_loss binary         0.332 pre0_mod0_post0</code></pre>
</div>
</div>
<p>Our best random forest model outperforms our best classification tree in terms of both accuracy and log loss. Therefore, we will select this tuned random forest model as our final model and fit it to the entire dataset before taking it to production.</p>
</section>
<section id="fitting-and-exploring-the-final-model" class="level1">
<h1>Fitting and Exploring the Final Model</h1>
<p>Now that we have selected a final model, let’s fit it to the full dataset so that we can learn about it and make some initial predictions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fitting the final random forest model to the full dataset</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>rf_production_fit<span class="ot">&lt;-</span>rf_final_wkf <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To better understand why our final model likely won’t predict was well as we would have hoped, let’s produce the confusion matrix for our final model fit to the full dataset; this is a training set confusion matrix, so it will be informative but optimistic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Generating predictions for the full dataset</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>predictions<span class="ot">&lt;-</span><span class="fu">predict</span>(rf_production_fit,<span class="at">new_data =</span> data)<span class="sc">$</span>.pred_class</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating confusion matrix</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">conf_mat</span>(data <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">prediction =</span> predictions), diabetes_binary, prediction), </span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> <span class="st">"heatmap"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Modeling_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looking at this confusion matrix, it is clear our model struggles to identify those with diabetes and, therefore, often defaults to the most prevalent class (no diabetes). This results in over 31,141 individuals in our dataset misidentified as individuals without diabetes. Meanwhile, our model predicts an individual does have diabetes less than 6,000 times for a dataset with 35,346 individuals who actually have diabetes.</p>
<p>Now that we have fit the final model and explored the training confusion matrix, we can use it to make predictions. For example, the code below predicts whether or not an individual with the following characteristics has diabetes: - Has not exercised in the past month - Has high blood pressure - Has high cholesterol - Does not eat their fruits and vegetables - Has a history of smoking - Is not a heavy drinker - Is male - Is between the ages of 60 and 64 - Earns between $15,000 and $20,000 per year - Has a BMI of 40</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating a new observation to predict for using our final model</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>new_obs<span class="ot">&lt;-</span><span class="fu">tibble</span>(<span class="at">.rows =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">phys_activity =</span> <span class="fu">factor</span>(<span class="dv">0</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_bp =</span> <span class="fu">factor</span>(<span class="dv">1</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">high_chol =</span> <span class="fu">factor</span>(<span class="dv">1</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fruits =</span> <span class="fu">factor</span>(<span class="dv">0</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">veggies =</span> <span class="fu">factor</span>(<span class="dv">0</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">smoker =</span> <span class="fu">factor</span>(<span class="dv">1</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hvy_alc_consump =</span> <span class="fu">factor</span>(<span class="dv">0</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sex =</span> <span class="fu">factor</span>(<span class="dv">1</span>, <span class="at">levels =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">factor</span>(<span class="dv">9</span>, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"18 to 24"</span>, <span class="st">"25 to 29"</span>,</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"30 to 34"</span>, <span class="st">"35 to 39"</span>,</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"40 to 44"</span>, <span class="st">"45 to 49"</span>,</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"50 to 54"</span>, <span class="st">"55 to 59"</span>,</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"60 to 64"</span>, <span class="st">"65 to 69"</span>,</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"70 to 74"</span>, <span class="st">"75 to 79"</span>,</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"80+"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">income =</span> <span class="fu">factor</span>(<span class="dv">3</span>, <span class="at">levels =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Less than $10k"</span>, <span class="st">"$10k to $15k"</span>,</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"$15k to $20k"</span>, <span class="st">"$20k to $25k"</span>,</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"$25k to $35k"</span>, <span class="st">"$35k to $50k"</span>,</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>                                                   <span class="st">"$50k to $75k"</span>, <span class="st">"$75k+"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bmi =</span> <span class="dv">40</span>)</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a><span class="co">#Predicting whether or not this new individual has diabetes</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(rf_production_fit, <span class="at">new_data =</span> new_obs)<span class="sc">$</span>.pred_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Yes
Levels: No Yes</code></pre>
</div>
</div>
<p>It seems this individual is one of the rare people our model predicts to have diabetes.</p>
</section>
<section id="wrap-up" class="level1">
<h1>Wrap-Up</h1>
<p>This document has described our process of tuning both the classification tree and random forest models to predict whether or not an individual has diabetes. It seems the factors we have explored are not particularly useful for predicting diabetes, or at least not in combination with the two model classes we have tested.</p>
<p>While not permanently hosted on the web, I have also produced an API that can be used to extract predictions from our final model fit to the full dataset, and the code for this API lives in the associated <a href="https://github.com/jccrews256/Final-Project/tree/main">GitHub repo</a>. If you deploy this API, happy predicting!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>